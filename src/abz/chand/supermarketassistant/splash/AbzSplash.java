package abz.chand.supermarketassistant.splash;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class AbzSplash extends View {

	private ArrayList<Path> graphics;

	private ArrayList<Float> xs;
	private ArrayList<Float> ys;


//	private double[] x1 = {0.7635358,2.8039904,5.2626915,8.8889,14.128332,21.637787,30.30409,35.44251,39.575985,44.269634,48.291283,53.750538,56.73437,59.894913,61.769634,63.10363,63.895706,63.911236,64.16503,63.911236,64.80193,65.59192,65.686554,66.29707,67.52955,69.090706,70.64404,72.22133,73.7661,74.517456,75.30308,76.039276,76.35586,77.45161,78.683235,80.78579,82.71425,86.09398,88.750984,92.05544,96.45509,99.63475,103.22757,106.351074,108.61938,109.82674,111.82242,113.39039,114.530655,115.62785,116.72677,117.30146,117.1706,117.78859,117.61442,117.61442,117.1706,116.38292,115.83911,115.252266,113.555695,112.43449,110.68528,108.667885,105.84498,102.311745,98.3853,92.94007,88.22466,82.18566,75.286064,67.644264,60.663067,54.01105,49.225334,44.50985,39.049656,32.21586,29.901073,28.266273,30.646738,34.6132,39.34869,44.929585,50.7171,57.10299,65.31456,74.51026,84.087135,90.86766,97.377205,103.73542,108.65387,111.86483,116.51085,118.80387,120.40696,121.78523,123.10359,122.94036,122.94036,123.38419,123.94691,123.38419,123.38419,123.82802,123.82802,123.82802,123.82802,124.27185,124.90717,125.63491,126.47441,127.59329,128.93373,130.6549,131.86177,133.86359,135.4286,138.18706,140.44002,142.28954,143.64131,144.41885,145.61887,146.01942,146.7736,146.90707,147.3987,147.3509,147.3509,147.3509,147.3509,146.45502,145.57559,144.54597,143.2472,141.02046,140.28043,139.07574,137.81851,137.58669,137.13278,136.78844,136.69904,136.11676,136.2552,136.2552,136.2552,137.02519,138.54369,141.02995,144.42628,147.70099,152.06291,155.32355,159.53017,163.56242,167.14854,170.48883,173.28142,175.37236,176.92323,177.97504,179.42119,179.99684,181.04698,181.45653,182.58708,183.30098,184.63246,186.40778,188.21796,190.31973,192.20749,193.70285,196.18175,198.26318,200.70451,202.38557,202.82942,203.35744,203.69843,203.71707,203.39139,203.09088,203.27324,202.82942,202.82942,202.35196,201.56766,200.78673,200.30403,199.97939,199.57101,199.15591,198.24442,193.51683,187.64583,177.60915,166.73479,149.80304,132.06004,109.94201,91.41766,76.45279,62.410046,51.709354,44.918465,41.786846,39.934555,40.667305,43.06416,44.82663};
//	private double[] y1 = {266.03604,270.81192,276.8744,286.11325,295.04343,302.83896,310.93405,316.70642,318.78885,320.0248,319.22,315.45905,312.37576,305.52374,297.30933,288.82486,276.5205,266.76984,254.98874,241.54861,229.18298,215.20032,204.29247,192.58751,182.09044,173.70758,164.71715,158.2198,153.50533,149.87224,147.81027,146.33698,145.7034,144.62445,146.87802,150.19443,155.99547,163.92033,174.83246,189.2416,204.553,220.16043,235.94818,252.06522,265.5552,279.12454,291.71283,302.01453,311.51334,316.96988,321.33075,323.77014,325.19928,327.00885,327.48563,326.47183,324.69775,322.78925,320.29346,317.03156,311.60568,306.56882,299.8855,292.9686,284.93884,277.20996,268.02002,259.1514,251.0657,243.53665,238.03961,232.87268,230.77621,229.65576,229.67276,230.37054,232.785,237.1445,242.16727,249.12961,254.76563,263.34024,268.99463,274.0031,276.80746,278.62878,278.97354,276.83572,272.53424,268.68338,264.1845,257.85196,250.14587,243.534,232.98547,224.86469,215.8588,207.03549,198.05002,189.90584,182.69946,176.45432,169.65605,164.3463,159.96964,156.43352,153.79001,152.32813,151.14317,154.34206,159.26186,166.03876,177.90845,190.7488,203.94203,214.97711,226.8782,238.50629,249.51025,261.68005,274.35263,285.17624,293.80847,300.96967,307.16223,311.2972,316.0481,318.65833,320.80838,322.045,323.182,324.04996,324.6282,322.02444,318.23776,313.181,306.24875,299.0453,291.12747,284.22577,277.07813,270.6142,263.78754,255.8808,250.15216,244.69055,241.01065,237.95041,235.06845,232.57278,230.01276,227.15143,224.76712,222.16998,220.22931,217.69293,215.15024,212.12381,208.9749,205.60312,203.64131,201.88649,200.52655,200.14026,199.10158,198.90668,200.29254,202.23692,205.8011,211.35263,221.25488,229.4292,239.48254,248.7623,259.84683,269.97318,280.23642,289.14374,295.28513,302.4999,304.8267,306.67014,308.2407,309.0424,309.81796,310.4193,311.3139,312.52322,313.7369,315.92856,317.8388,319.73895,321.18793,322.16245,323.6807,324.5114,325.3005,324.26813,323.10983,321.10452,321.15683,323.59714,328.29773,336.5419,345.2313,353.7133,364.4898,376.49823,386.66885,394.67584,402.51642,414.3284,418.5184,420.63467};

//	private double[] x2 = {215.92232,215.0101,225.17116,234.7922,244.87022,255.43422,262.9753,269.34018,274.1887,278.32382,283.13022,285.85733,287.28812,288.17935,289.42944,291.89462,292.9729,294.82275,295.3305,295.14566,293.31805,287.93872,281.90628,275.80853,259.80832,252.89136,244.9911,237.24242,231.8619,226.91649,223.78946,221.85844,220.61784,219.80803,219.69489,219.69489,219.69489,219.69489,223.94742,230.59987,241.1989,252.70694,266.37225,284.73584,297.66434,307.6676,311.5673,};
//	private double[] y2 = {230.78299,231.12836,223.89804,218.4863,212.28018,206.43613,202.25806,198.24155,195.30374,193.45695,191.0523,189.80696,189.02417,188.81575,188.81575,188.81575,188.81575,188.18329,188.37166,189.2813,191.9942,198.94012,207.71907,217.76697,243.34698,257.38812,271.69913,287.2283,297.2521,307.6137,313.8509,318.21497,321.08615,323.48178,324.48996,325.272,325.9662,326.63458,325.16992,322.8488,318.46008,312.4019,304.18765,294.38986,287.4554,278.84116,273.6384};

	private double[] x1 = {0.44382802,0.44382802,0.44382802,0.44382802,0.44382802,2.391155,5.2884407,9.84464,18.946426,25.979431,31.606422,34.778896,38.779526,43.416714,46.27587,48.003437,49.650066,50.462505,50.15257,50.15257,50.15002,50.494564,49.922253,49.572773,49.680313,49.70874,49.959732,49.529736,48.704716,49.26491,49.26491,49.26491,48.7298,48.829483,48.821083,48.821083,48.821083,48.821083,48.821083,48.821083,48.821083,48.821083,48.821083,49.81816,51.47636,54.617275,58.320465,61.81643,65.41355,69.29479,74.283676,78.492836,84.35784,88.22411,92.62077,95.09778,97.49847,98.94854,99.74661,100.50556,101.30914,101.63662,102.39344,103.20079,103.85576,104.34157,104.66567,104.743416,104.743416,105.06416,105.37075,105.81995,106.25056,106.61865,107.48135,107.40639,106.66872,105.239914,103.64913,101.20074,97.645454,93.77608,87.87049,82.87982,77.79116,71.38879,64.91069,58.022526,50.59402,43.152706,36.279102,31.37547,27.061825,24.202936,22.663769,21.630375,20.83531,19.800728,19.051165,20.416088};
	private double[] y1 = {278.23956,280.9904,284.807,291.94684,299.09705,310.80276,322.16602,333.4291,342.16885,346.25693,348.5744,348.69086,346.98383,341.70303,336.4646,325.6454,314.8476,303.31598,291.63455,278.72107,263.0285,248.7247,234.445,221.58664,209.73425,198.75404,187.3273,177.34033,168.13274,159.52097,151.384,145.06837,139.23436,134.6779,131.44414,129.14357,126.95265,125.75394,124.1608,122.95871,122.10037,121.380905,120.722046,123.86189,128.40056,136.25633,146.2756,157.9423,171.66724,183.58226,197.94173,210.3823,226.38446,241.27246,255.17114,269.02118,280.025,289.05615,296.58676,303.1779,310.6581,315.96893,320.1891,323.42044,325.5004,327.0141,328.5509,329.3341,329.96423,331.12476,331.7383,332.6372,333.499,334.23563,334.03564,332.0294,328.56866,323.33972,316.77704,311.84933,305.28775,299.36667,292.17105,286.40115,280.13864,273.57083,268.43466,265.15295,262.6243,261.07254,260.31546,259.8441,259.87137,259.87137,259.87137,259.87137,259.87137,259.87137,259.87137,259.42728};
	private double[] x2 = {96.77825,97.66698,98.87321,100.34238,101.25447,103.5068,105.46813,107.055214,108.90456,110.671036,112.17296,113.47596,114.70011,115.93875,117.602036,118.385025,119.62512,120.2774,121.62355,122.41205,122.75021,123.46065,124.36473,125.93006,127.058655,127.82247,128.33054,128.26631,128.71013,129.36281,129.59778,130.48851,130.48544,130.48544,131.0102,130.92928,130.92928,130.92928,130.92928,130.92928,130.92928,130.48209,129.59778,128.45132,127.08037,126.491,124.79382,124.428154,123.38419,122.89548,122.496544,122.05271,122.05271,122.05271,121.59972,121.95304,121.60887,122.64705,123.43266,124.653145,126.41509,128.7274,131.55989,135.2937,138.64497,141.48413,143.44135,145.55515,147.39156,149.13824,150.5918,152.73311,154.29465,155.5992,156.96214,157.63197,158.726,159.25632,158.89044,160.00017,159.77809,160.69313,161.81389,162.67783,163.40414,164.78098,165.8519,167.14926,168.54993,170.07616,172.53186,173.841,175.0675,176.29451,177.08739,177.5312,177.97505,177.97505,178.44946,178.41887,178.41887,178.88896,178.32712,176.77988,175.32607,173.3832,169.913,166.18073,160.0022,154.85892,145.95181,139.80705,132.1745,126.244606,119.94595,113.41245,109.130714,104.8066,101.90551,99.41122,97.51663,96.0792,95.86686,94.9792,93.82586,93.4258,92.7021,92.31623,91.78014,91.872406,91.872406,91.872406};
	private double[] y2 = {124.0013,126.27251,129.34879,133.85947,138.62074,144.6908,150.68706,156.055,161.39427,167.03212,173.77522,180.4133,187.88452,195.58145,204.23528,213.16782,223.07419,232.66043,243.97202,252.00491,260.69687,268.18607,276.32358,283.26678,289.23337,294.50656,298.38504,302.8359,307.56836,312.19647,316.02887,320.73117,323.40942,326.29187,328.50525,329.6806,331.19254,331.74005,332.2845,333.53168,334.1748,332.2458,326.61865,319.7143,313.3015,307.0957,300.55792,295.16165,290.043,285.80368,280.7594,275.8672,271.72876,268.23456,264.26654,260.37,256.4523,252.31403,248.52646,245.84796,242.35675,239.27185,234.6904,230.20923,226.39334,222.66425,220.70587,218.14664,215.99951,213.4451,210.75232,207.85565,205.03969,202.69234,200.36986,199.84514,198.30635,197.77573,197.2103,197.25362,198.17084,201.3875,205.84581,212.02771,219.92023,228.50064,237.71545,248.10904,257.2966,267.91644,279.63507,288.53363,296.7949,301.9485,307.8438,311.74634,316.04413,317.74863,320.8046,323.19052,323.74057,324.31808,325.33734,325.22192,325.5978,325.1025,325.15372,325.02707,325.84735,326.55472,331.15958,334.22528,338.7949,344.05234,350.7989,358.195,365.05945,372.9582,378.2639,386.46423,392.2513,397.36746,400.4609,405.2318,411.9279,413.52908,416.8118,419.74646,421.44806,422.02066,423.54703,423.74332};
	private double[] x3 = {188.276,190.62415,191.41913,199.30835,205.31288,211.84038,218.12529,222.64417,227.3445,231.0175,237.35579,239.66624,241.2182,243.21774,243.80952,244.10542,244.10542,243.45213,243.01091,240.98395,238.72672,235.51851,230.69272,226.03488,220.85466,216.93149,213.97414,212.02747,210.86066,210.07309,209.73393,209.84335,209.26492,209.48683,209.48683,208.45105,209.16599,209.043,209.7885,211.02567,212.81465,215.29897,226.6078,234.66405,245.49483,255.22852,264.87793,274.5563,288.01758,296.30136,301.81732,305.9927,308.99268,312.81052,314.47815,316.1509,316.44937};
	private double[] y3 = {207.02376,204.80328,204.27296,197.9405,194.65388,190.20642,185.87726,181.74747,178.25139,175.3112,171.76414,170.38617,169.60971,168.16524,168.38728,170.11862,173.07927,179.18031,186.36684,198.68858,211.7287,226.19012,243.43027,259.83014,276.40994,291.34344,301.57782,309.3953,316.41928,321.33237,324.41196,326.6607,327.81827,328.5973,329.5184,329.6688,330.72897,329.57657,324.9767,320.5635,315.60828,309.5149,292.415,283.9737,274.09146,266.2595,260.13718,255.29498,251.78131,250.12634,250.10123,251.42282,253.63593,257.91833,259.7273,261.49454,262.09186};

	
	private int start1;
	private int start2;
	private int start3;
	
	private Path path1;
	private Path path2;
	private Path path3;

	public AbzSplash(Context context) {
		super(context);
		init();
	}

	public AbzSplash(Context context, AttributeSet attrs) {
		super(context, attrs);
		init();
	}

	public AbzSplash(Context context, AttributeSet attrs, int defStyle) {
		super(context, attrs, defStyle);
		init();
	}

	private void init() {
		path1 = new Path();
		path2 = new Path();
		path3 = new Path();
		start1 = 0;
		start2 = 0;
		start3 = 0;
		path1.moveTo((float) x1[0], (float) y1[0]);
		path2.moveTo((float) x2[0], (float) y2[0]);
		path3.moveTo((float) x3[0], (float) y3[0]);

		graphics = new ArrayList<Path>();
		xs = new ArrayList<Float>();
		ys = new ArrayList<Float>();
	}

	public ArrayList<Path> getPaths(){
		return graphics;
	}

	public boolean onTouchEvent(MotionEvent event){
		int eventaction = event.getAction();
		final float newX = event.getX();
		final float newY = event.getY();	

		switch (eventaction){

		case MotionEvent.ACTION_DOWN:
			path1.moveTo(newX, newY);
			return true;

		case MotionEvent.ACTION_MOVE:
			xs.add(newX);
			ys.add(newY);
			path1.lineTo(newX, newY);
			path1.moveTo(newX, newY);
			return true;

		case MotionEvent.ACTION_UP:
			String sx = "XXX: ";
			String sy = "YYY: ";
			for(float f : xs){
				sx += f + ",";
			}
			for(float f : ys){
				sy += f + ",";
			}
			System.out.println(sx);
			xs.clear();
			ys.clear();
			System.out.println(sy);

			graphics.add(path1);
			path1 = new Path();
			path2 = new Path();
			return true;
		}

		return true;
	}

	@Override
	protected void onDraw(Canvas canvas) {

		canvas.drawARGB(255, 255, 255, 255);
		Paint l = new Paint();
		l.setStyle(Paint.Style.STROKE);
		l.setStrokeWidth(10);
		l.setDither(true);
		l.setStrokeCap(Paint.Cap.ROUND);
		l.setStrokeJoin(Paint.Join.ROUND);
		l.setARGB(255, 0, 0, 0);

		if (start1 < x1.length){
			path1.lineTo((float) x1[start1], (float) y1[start1]);
			path1.moveTo((float) x1[start1], (float) y1[start1]);
			start1++;
		} //else
		
		if (start2 < x2.length){
			path2.lineTo((float) x2[start2], (float) y2[start2]);
			path2.moveTo((float) x2[start2], (float) y2[start2]);
			start2++;
		} //else

		if (start3 < x3.length){
			path3.lineTo((float) x3[start3], (float) y3[start3]);
			path3.moveTo((float) x3[start3], (float) y3[start3]);
			start3++;
		} 
		canvas.drawPath(path1, l);
		canvas.drawPath(path2, l);
		canvas.drawPath(path3, l);
		for (Path pa : graphics){
//						canvas.drawPath(pa, l);
		}

//				canvas.drawPath(path1, l);

		invalidate();
	}

	public void undoPath(){
		if (graphics.isEmpty()) return;
		graphics.remove(graphics.size()-1);
	}

	public Bitmap getBitmapView(){
		setDrawingCacheEnabled(true);
		Bitmap copy = Bitmap.createBitmap(getDrawingCache());
		setDrawingCacheEnabled(false);
		return copy;
	}
}